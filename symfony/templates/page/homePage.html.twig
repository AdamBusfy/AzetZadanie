{% extends 'base.html.twig' %}
{% block title %}HomePage{% endblock %}

{% block stylesheets %}
    {{ encore_entry_link_tags('pageHomepage') }}
    {{ encore_entry_script_tags('pageHomepage') }}
{% endblock %}

{% block body %}
    {% for message in app.flashes('success') %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endfor %}

    {% for message in app.flashes('success_delete_gallery') %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endfor %}

    {{ include('layouts/navbar.html.twig') }}
    {{ include('layouts/createGallery.html.twig') }}

    <div class="container">
        <div class="row mt-5">
            <div class="col-sm-6 col-md-4 col-xl-3 mt-4">
                <div class="card cursor-pointer" data-toggle="modal" data-target="#exampleModal">
                    <div class="card-img-top"
                         style="height:250px;background-size:cover;background-image: url('https://cdn.pixabay.com/photo/2017/04/20/07/07/add-2244771_960_720.png');"></div>
                    <div class="card-body">
                        <h5 class="card-title text-truncate"><strong>New Gallery</strong></h5>
                        <p class="card-text text-truncate">Click to create</p>
                    </div>
                </div>
            </div>
            {% for gallery in galleries %}
                {% set deleteForm = deleteGalleryForm.createView %}
                <div class="col-sm-6 col-md-4 col-xl-3 mt-4">
                    <div class="card cursor-pointer">

                        {% if gallery.items is empty %}
                            <div class="card-img-top" onClick="window.location.href = '{{ path('gallery', { id: gallery.id }) }}'"
                                 style="height:250px;background-size:cover;background-image: url('data/gallery/no_image.png');"></div>
                            <div class="card-body">
                                <h5 class="card-title text-truncate"><strong>{{ gallery.name }}</strong></h5>
                                <p class="card-text text-truncate">{{ gallery.description }}</p>

                                {{ form_start(deleteForm, { attr: { onsubmit: 'return confirm("Are you sure you want to delete this gallery?");' } }) }}
                                {{ form_row(deleteForm.id, { attr: { value: gallery.id } }) }}
                                {{ form_row(deleteForm.submitButton) }}
                                {{ form_end(deleteForm) }}

                                {# <button type="button" class="btn btn-primary" data-toggle="modal" #}
                                {# data-target="#editModal">Edit #}
                                {# </button> #}

                            </div>
                        {% else %}
                            <div class="card-img-top" onClick="window.location.href = '{{ path('gallery', { id: gallery.id }) }}'"
                                 style="height:250px;background-size:cover;background-image: url('{{ gallery.items[0].photo }}');"></div>
                            <div class="card-body">
                                <h5 class="card-title text-truncate"><strong>{{ gallery.name }}</strong></h5>
                                <p class="card-text text-truncate">{{ gallery.description }}</p>

                                {{ form_start(deleteForm, { attr: { onsubmit: 'return confirm("Are you sure you want to delete this gallery?");' } }) }}
                                {{ form_row(deleteForm.id, { attr: { value: gallery.id } }) }}
                                {{ form_row(deleteForm.submitButton) }}
                                {{ form_end(deleteForm) }}

                                {# <button type="button" class="btn btn-primary" data-toggle="modal" #}
                                {# data-target="#editModal">Edit #}
                                {# </button> #}
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="behind_text">
        <p>Galleries</p>
    </div>
{% endblock %}
